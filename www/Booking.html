<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style></style>
    <title>Document</title>
    <link rel="stylesheet" type=" text/css" href="css/book.css">
    <link rel="stylesheet" href="css/preloader.css">
    <script>
        function getDate(x){
                if( x === '1'){
                        document.getElementById("date1").style.visibility = "visible";
                    document.getElementById("date2").style.visibility = "hidden";
                    document.getElementById("date3").style.visibility = "hidden";
                    document.getElementById("time1").style.visibility = "visible";
                    document.getElementById("time2").style.visibility = "hidden";
                    document.getElementById("time3").style.visibility = "hidden";
                  }
                  else if(x === "2"){
                          document.getElementById("date1").style.visibility = "visible";
                      document.getElementById("date2").style.visibility = "visible";
                      document.getElementById("date3").style.visibility = "hidden";
                      document.getElementById("time1").style.visibility = "visible";
                      document.getElementById("time2").style.visibility = "visible";
                      document.getElementById("time3").style.visibility = "hidden";
                      }
                    else if(x=== "3"){
                      document.getElementById("date1").style.visibility = "visible";
                      document.getElementById("date2").style.visibility = "visible";
                      document.getElementById("date3").style.visibility = "visible";
                      document.getElementById("time1").style.visibility = "visible";
                      document.getElementById("time2").style.visibility = "visible";
                      document.getElementById("time3").style.visibility = "visible";
                      }
        
              }
      

            </script>

</head>

<body>

    <div class="Booking">
            <a href="MainPage.html"><img src="img/DriveBox.png" alt="login icon" class="avatar" width="100"></a>
        

                 
                <br>
                <br>
                <p>Days</p>
                <select class="select" required id="day" onchange="getDate(this.options[this.selectedIndex].value)"> 
                    <option value="">Select Days</option>
                    <option id="1 day" value="1">1 day</option>
                    <option id="2 days" value="2">2 days</option>
                    <option id="3 days" value="3">3 days</option>                        
                  </select>
                
                  <p>Dates in a Week</p>
                  <input type="date" id="date1"  name="date1"style="visibility:hidden;" ><br> 
                  <input type="date" id="date2"  name="date2" style="visibility:hidden;" ><br>
                  <input type="date" id="date3"  name="date3" style="visibility:hidden;" > 
                  <br>
                
                  <p>Select Time</p>
                  <table>
                    <tr>
                       <td>
                  <select class="select" required id="time1" style="visibility:hidden;"> 
                      <option value="">Select Time</option>
                      <option id="07:00" value="07:00">07:00</option>
                      <option id="10:00" value="10:00">10:00</option>
                      <option id="11:00" value="11:00">11:00</option>  
                      <option id="13:00" value="13:00">13:00</option>
                      <option id="15:00" value="15:00">15:00</option>                       
                    </select>
                      </td>
                    </tr>
                    <tr>
                       <td>
                  <select class="select" required id="time2" style="visibility:hidden;"> 
                      <option value="">Select Time</option>
                      <option id="07:00" value="07:00">07:00</option>
                      <option id="10:00" value="10:00">10:00</option>
                      <option id="11:00" value="11:00">11:00</option>  
                      <option id="13:00" value="13:00">13:00</option>
                      <option id="15:00" value="15:00">15:00</option>                       
                    </select>
                       </td>
                    </tr>
                    <tr>
                       <td>
                  <select class="select" required id="time3" style="visibility:hidden;"> 
                      <option value="">Select Time</option>
                      <option id="07:00" value="07:00">07:00</option>
                      <option id="10:00" value="10:00">10:00</option>
                      <option id="11:00" value="11:00">11:00</option>  
                      <option id="13:00" value="13:00">13:00</option>
                      <option id="15:00" value="15:00">15:00</option>                       
                    </select>
                       </td>
                    </tr>
                  </table>
                <br>
                
                <input type="submit" id="book" type="submit"  value="Book"> 
                <br/>
            <!-- <input id="datetimepicker" type="text">
<br>
            <script type="text/javascript">
                $(document).ready(function () {
                    $('#datetimepicker').datetimepicker(
                        {
                            minDate: '0',
                        },
                        // allowTimes:[
                        //     '11:00', '13:00', '15:00',
                        //     '16:00', '18:00', '19:00', '20:00'
                        // ]
                    );
                });
            </script>

            <br>
            <input type="button" value="book a lesson">  -->
        
    </div>

    <script src="js/jquery.js"></script>
    <script>
            var ID = localStorage.getItem("id");
            //console.log(ID);
           
            // console.log(customersDataString);
            $('#book').click(function () {
                //var khoza=$('#date1').datepicker('getDate');
                var date1 = jQuery('#date1').val();
                var date2 = jQuery('#date2').val();
                var date3 = jQuery('#date3').val();
                
            //return;
                $.ajax({
                    // url:"http://localhost:8081/github/CrucialConnections/CC_APIS/apis/Client_Login.php",
                    url: "http://localhost:8081/github/CrucialConnections/CC_APIS/apis/addBooking.php",
                    method: "POST",
                    data: JSON.stringify({
                        
                        CLIENT_ID: localStorage.ID,
                        PACKAGE_ID: localStorage.P_ID,
                        NUM_OF_DAYS: $('#day').val(),
                        date1: date1,
                        date2: date2,
                        date3: date3,

                        time1: $('#time1').val(),
                        time2: $('#time2').val(),
                        time3: $('#time3').val()
                        // USER_PASSWORD: $('#password').val()
                    }),
                    contentType: "application/json; charset=utf-8",
                     dataType:"JSON",
                    success: function (data) {

                        swal("package selected sucessfully", "success")
                         window.location.href="MainPage.html";
                    },
                    error: function (err) {
                        
                        console.log(err);
                    }
                });
            });
        </script>
        <script>
                var overlay = document.getElementById("overlay");
                window.addEventListener('load', function () {
                   // overlay.style.display = 'none';
                })
            </script>
    
    <script>
        var ClientID = localStorage.getItem("id");

        $(document).ready(function () {
            $.ajax({
                type: "POST",
                // contentType: "application/json; charset=utf-8",
                // dataType: "dataType",
                url: "http://localhost:8081/github/CrucialConnections/CC_APIS/apis/ClientDetails.php",
                
                data: JSON.stringify({
                    EMAIL: localStorage.username,
                    CLIENT_ID:localStorage.id,
                }),
                contentType: "application/json; charset=utf-8",
                 dataType:"JSON",
                success: function (data) {
                    console.log(data[0]);
                    data = data[0];
                },
                error: function (err) {

                    console.log(err);
                    // window.alert("invalid password or Email");
                }
            });


        });
    </script>

<script>
        // date1
     var today = new Date().toISOString().split('T')[0];
document.getElementsByName("date1")[0].setAttribute('min', today);
// date2
var today = new Date().toISOString().split('T')[0];
document.getElementsByName("date2")[0].setAttribute('min', today);
// date3
var today = new Date().toISOString().split('T')[0];
document.getElementsByName("date3")[0].setAttribute('min', today);
    </script>
    </body>
</html>