
<!DOCTYPE html>
<html lang="en">
<head>
        <!-- <meta charset="UTF-8"> -->
        <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title> DriveBox</title>
        <!-- <link rel="stylesheet" href="css/font-awesome.min.css"> -->
        <!-- <link rel="stylesheet" href="css/hStyle.css"> -->
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js" integrity="sha256-JirYRqbf+qzfqVtEE4GETyHlAbiCpC005yBTa4rj6xg=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css" integrity="sha256-zuyRv+YsWwh1XR5tsrZ7VCfGqUmmPmqBjIvJgQWoSDo=" crossorigin="anonymous" />
      </head>


<body>
    <!-- Button trigger modal -->

      <!-- Modal addClient-->
      <div class="modal fade" id="AddClientmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Add Vehicle </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          <form>
            <div class="modal-body">
              

                  <div class="form-group">
                      <label>VEHICLE NAME</label>               
                      <input type="text" class="form-control" id="VEHICLE_NAME" placeholder="LastName" required
                      onkeyup="isAlphaNumeric(this.value,'#VEHICLE_NAME')">
                    </div>
  
                  <div class="form-group">
                      <label>MODEL</label>
                      <input type="text" class="form-control" id="MODEL" placeholder="FirstName" required
                      onkeyup="isAlphaNumeric(this.value,'#MODEL')">
                    </div>
              
            </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary" id="SaveClient">Save Vehicle Details</button>
          </form>
            </div>
          </div>
        </div>
      </div>
   <!-- ################################################################################################################            -->

<!-- edit data modal       -->
      <!-- Modal -->
      <div class="modal fade" id="EditClientmodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Update Vehicle Details  </h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          <form>
            <div class="modal-body" id="fetchedData">
              

                  <div class="form-group">
                      <label>VEHICLE NAME</label>               
                      <input type="text" class="form-control" id="VEHICLE_NAME" placeholder="LastName" required 
                      onkeyup="isAlphaNumeric(this.value,'#VEHICLE_NAME')"/>
                    </div>
  
                  <div class="form-group">
                      <label>First Name</label>
                      <input type="text" class="form-control" id="MODEL" placeholder="FirstName" required
                      onkeyup="isAlphaNumeric(this.value,'#MODEL')"/>
                    </div>
              
            </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="submit" class="btn btn-primary" id="UpdateClient">Save Updated Details</button>
          </form>
            </div>
          </div>
        </div>
      </div>

    <div class="Container">
        <div class="jumbotron">
            <div class="card">
                <h2> Vehicles</h2>
            </div>
            <div class="card">
                <div class="card-body">
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#AddClientmodal">
                                Add
                        </button>
                        <button type="button" class="btn btn-primary" data-toggle="modal"  id="clients">
                          show Vehicles
                  </button>
                </div>
            </div> 
            <div class="card">
              <div class="card-body">
                      <table class="table table-striped table-dark" >
                        <thead>
                          <tr>
                              <th scope="col">ID</th>
                              <th scope="col">Vehicle Name</th>
                              <th scope="col">Model</th>
                              <th scope="col">Code</th>
                              <th scope="col">Action</th>
                          
                          </tr>
                        </thead>
                        <tbody id="ClientsData">
                          
                        </tbody>
                      </table>
              </div>
            </div>


        </div>
    </div>
<!-- add client to clients -->
<script src="js/main.js"></script>
    <script src="js/jquery.js"></script>
    <script>
        $('#SaveClient').click(function(kho){
            kho.preventDefault();
           
            //alert("username : "+$username+"\nPassword : "+$password);
    
            $.ajax({
                url:"http://localhost:8081/github/CrucialConnections/CC_APIS/apis/C_RegisterUser.php",
                method:"POST",           
                
                data: JSON.stringify({CLIENT_NAME : $('#c_firstname').val(),CLIENT_SURNAME :$('#c_surname').val(),EMAIL : $('#c_EmailAddress').val(),C_PASSWORD : $('#c_password').val() }),
                contentType: "application/json; charset=utf-8",
                dataType:"JSON",
                          
                success:function(data){
                    swal({
                      title: "Adding client",
                      text: "Client Added succesfully",
                      icon: "success",
                      button: "Ok",
                    });
                },
                error:function(err){
                    console.log(err);
                }
            });
        });
    </script>
    <!-- fetch from data to table  -->

    <script src="js/jquery.js"></script>
    <script>
        $(document).ready(function(){
            $("#clients").click(function(){
                  $.get("http://localhost:8081/github/CrucialConnections/CC_APIS/apis/SelectClients.php",function(data,status){
                        console.log(data);
                        var data=JSON.parse(data);

                        data.forEach(function(dt) {
                          $("#ClientsData").append("<tr>" + 
                            "<td>"+ dt.CLIENT_ID+"</td>" +       
                            "<td>"+ dt.CLIENT_NAME+"</td>" +
                            "<td>"+ dt.CLIENT_SURNAME+"</td>" +
                            "<td>"+ dt.EMAIL+"</td>"+
                            "<td><input type='button' value='EDIT' class='btn btn-warning' id='fetchdata' data-toggle='modal' data-target='#EditClientmodal'/> </td>"+
                            "</tr>");
                       
                        });
                            
                  });
            });

        });     
    </script>
<!-- fetch data to textfields to update client data -->
<script>
  $(document).ready(function(){
      $("#fetchdata").click(function(){
            $.get("http://localhost:8081/github/CrucialConnections/CC_APIS/apis/SelectClients.php",function(data,status){
                  console.log(data);
                  var data=JSON.parse(data);

                  data.forEach(function(dt) {
                      $("#c_LastName").val(dt.CLIENT_SURNAME),
                      $("#c_FirstName").val(dt.CLIENT_NAME),
                      $("#c_EmailAddress").val(dt.c_EmailAddress)
                 
                  });
                      
            });
      });

  });     
</script>

       
</body>
</html>

    